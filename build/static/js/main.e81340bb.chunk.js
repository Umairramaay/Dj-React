(this.webpackJsonpgui=this.webpackJsonpgui||[]).push([[0],{171:function(e,t,a){e.exports=a(342)},342:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),l=a.n(o),c=a(36),i=a(43),u=(a(180),a(23)),s=a(343),m=a(118),p=a(350),d=a(38),h=a.n(d),E=function(e){return{type:"AUTH_SUCCESS",token:e}},g=function(e){return{type:"AUTH_FAIL",error:e}},f=function(){return localStorage.removeItem("user"),localStorage.removeItem("expirtaionDate"),{type:"AUTH_LOGOUT"}},b=function(e){return function(t){setTimeout((function(){t(f())}),1e3*e)}},y=s.a.Header,v=s.a.Content,w=(s.a.Footer,Object(u.e)(Object(i.b)(null,(function(e){return{logout:function(){return e(f())}}}))((function(e){return r.a.createElement(s.a,{className:"layout"},r.a.createElement(y,null,r.a.createElement("div",{className:"logo"}),r.a.createElement(m.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["2"]},e.isAuthenticated?r.a.createElement(m.a.Item,{key:"2",onClick:e.logout},"Logout"):r.a.createElement(m.a.Item,{key:"2"},r.a.createElement(c.b,{to:"/login"},"Login")),r.a.createElement(m.a.Item,{key:"1"},r.a.createElement(c.b,{to:"/"}," Post ")))),r.a.createElement(v,{style:{padding:"0 50px"}},r.a.createElement(p.a,{style:{margin:"16px 0"}},r.a.createElement(p.a.Item,null,r.a.createElement(c.b,{to:"/"},"Home")),r.a.createElement(p.a.Item,null,r.a.createElement(c.b,{to:"/"},"List"))),r.a.createElement("div",{className:"site-layout-content"},e.children)))})))),I=a(61),T=a(62),k=a(66),O=a(65),S=a(344),j=a(347),A=a(345),D=a(351),x=a(352),C=a(353),U=function(e){var t=e.icon,a=e.text;return r.a.createElement(S.a,null,r.a.createElement(t),a)},P=function(e){return r.a.createElement(j.b,{itemLayout:"vertical",size:"large",pagination:{onChange:function(e){console.log(e)},pageSize:3},dataSource:e.data,renderItem:function(e){return r.a.createElement(j.b.Item,{key:e.title,actions:[r.a.createElement(U,{icon:D.a,text:"156",key:"list-vertical-star-o"}),r.a.createElement(U,{icon:x.a,text:"156",key:"list-vertical-like-o"}),r.a.createElement(U,{icon:C.a,text:"2",key:"list-vertical-message"})],extra:r.a.createElement("img",{width:272,alt:"logo",src:"https://gw.alipayobjects.com/zos/rmsportal/mqaQswcyDLcXyDKnZfES.png"})},r.a.createElement(j.b.Item.Meta,{avatar:r.a.createElement(A.a,{src:e.avatar}),title:r.a.createElement("a",{href:"/".concat(e.id)},e.title),description:e.description}),e.content)}})},_=a(346),F=a(349),H=a(54),L=function(e){Object(k.a)(a,e);var t=Object(O.a)(a);function a(){var e;Object(I.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleForm=function(t,a,n){var r=document.getElementById("title").value,o=document.getElementById("content").value;switch(console.log(t,a,n),e.props.requestType){case"post":h.a.post("https://strider-blog.herokuapp.com/api/",{title:r,content:o}).then((function(e){console.log(e),window.location.reload()})).catch((function(e){return console.log(e)}));break;case"put":h.a.put("https://strider-blog.herokuapp.com/api/".concat(n,"/"),{title:r,content:o}).then((function(e){console.log(e),window.location.reload()})).catch((function(e){return console.log(e)}))}},e}return Object(T.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(_.a,{onFinish:function(t){return e.handleForm(t,e.props.requestType,e.props.articleID)}},r.a.createElement(_.a.Item,{name:"title",label:"Title"},r.a.createElement(F.a,{id:"title",placeholder:"Put a title here"})),r.a.createElement(_.a.Item,{name:"content",label:"Content"},r.a.createElement(F.a,{id:"content",placeholder:"Enter some content ..."})),r.a.createElement(_.a.Item,null,r.a.createElement(H.a,{type:"primary",htmlType:"submit"},this.props.btnText))))}}]),a}(r.a.Component),q=function(e){Object(k.a)(a,e);var t=Object(O.a)(a);function a(){var e;Object(I.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={articles:[]},e}return Object(T.a)(a,[{key:"componentDidMount",value:function(){var e=this;h.a.get("https://strider-blog.herokuapp.com/api/").then((function(t){e.setState({articles:t.data})}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(P,{data:this.state.articles}),r.a.createElement("br",null),r.a.createElement("h2",null,"Create Article Here"),r.a.createElement(L,{requestType:"post",articleId:null,btnText:"Create"}))}}]),a}(n.Component),z=a(348),R=function(e){Object(k.a)(a,e);var t=Object(O.a)(a);function a(){var e;Object(I.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={article:[]},e.handleDelete=function(t){var a=e.props.match.params.articleID;h.a.delete("https://strider-blog.herokuapp.com/api/".concat(a,"/")),e.props.history.push("/")},e}return Object(T.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.articleID;h.a.get("https://strider-blog.herokuapp.com/api/"+t).then((function(t){e.setState({article:t.data})}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(z.a,{title:this.state.article.title},r.a.createElement("p",null,this.state.article.content)),r.a.createElement("br",null),r.a.createElement(L,{requestType:"put",articleID:this.props.match.params.articleID,btnText:"Update"}),r.a.createElement("form",{onSubmit:this.handleDelete},r.a.createElement(H.a,{type:"danger",htmlType:"submit"},"Delete")))}}]),a}(n.Component),M=a(354),N={labelCol:{span:8},wrapperCol:{span:16}},B={wrapperCol:{offset:8,span:16}},V=Object(i.b)((function(e){return{loading:e.loading,error:e.error}}),(function(e){return{onAuth:function(t,a){return e(function(e,t){return function(a){a({type:"AUTH_START"}),h.a.post("https://strider-blog.herokuapp.com/rest-auth/login/",{username:e,password:t}).then((function(e){var t=e.data.key,n=new Date((new Date).getTime()+36e5);localStorage.setItem("token",t),localStorage.setItem("expirtaionDate",n),a(E(t)),a(b(3600))})).catch((function(e){a(g(e))}))}}(t,a))}}}))((function(e){return r.a.createElement("div",null,e.loading?r.a.createElement(M.a,{style:{fontSize:24},spin:!0}):r.a.createElement(_.a,Object.assign({},N,{name:"basic",initialValues:{remember:!0},onFinish:function(t){e.onAuth(t.username,t.password),e.history.push("/")},onFinishFailed:function(e){}}),r.a.createElement(_.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}]},r.a.createElement(F.a,null)),r.a.createElement(_.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},r.a.createElement(F.a.Password,null)),r.a.createElement(_.a.Item,null),r.a.createElement(_.a.Item,B,r.a.createElement(H.a,{type:"primary",htmlType:"submit"},"Login"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(c.c,{style:{marginRight:"10px"},to:"/signup/"},"SignUp"))))})),X=a(168),G=Object(i.b)((function(e){return{loading:e.loading,error:e.error}}),(function(e){return{onAuth:function(t,a,n,r){return e(function(e,t,a,n){return function(r){r({type:"AUTH_START"}),h.a.post("https://strider-blog.herokuapp.com/rest-auth/registration/",{username:e,email:t,password1:a,password2:n}).then((function(e){var t=e.data.key,a=new Date((new Date).getTime()+36e5);localStorage.setItem("token",t),localStorage.setItem("expirtaionDate",a),r(E(t)),r(b(3600))})).catch((function(e){r(g(e))}))}}(t,a,n,r))}}}))((function(e){var t=_.a.useForm(),a=Object(X.a)(t,1)[0];return r.a.createElement(_.a,{form:a,name:"register",onFinish:function(t){e.onAuth(t.username,t.email,t.password,t.confirm),e.history.push("/")},initialValues:{residence:["zhejiang","hangzhou","xihu"],prefix:"86"},scrollToFirstError:!0},r.a.createElement(_.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}]},r.a.createElement(F.a,null)),r.a.createElement(_.a.Item,{name:"email",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]},r.a.createElement(F.a,null)),r.a.createElement(_.a.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],hasFeedback:!0},r.a.createElement(F.a.Password,null)),r.a.createElement(_.a.Item,{name:"confirm",label:"Confirm Password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject("The two passwords that you entered do not match!"):Promise.resolve()}}}]},r.a.createElement(F.a.Password,null)),r.a.createElement(_.a.Item,null,r.a.createElement(H.a,{type:"primary",htmlType:"submit"},"Signup"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(c.c,{style:{marginRight:"10px"},to:"/login/"},"Login")))})),J=function(){return r.a.createElement("div",null,r.a.createElement(u.a,{exact:!0,path:"/",component:q}),r.a.createElement(u.a,{exact:!0,path:"/articles/:articleID/",component:R}),r.a.createElement(u.a,{exact:!0,path:"/login/",component:V}),r.a.createElement(u.a,{exact:!0,path:"/signup/",component:G}))};var K=Object(i.b)((function(e){return{isAuthenticated:null!==e.token}}),(function(e){return{onTryAutoSignup:function(){return e((function(e){var t=localStorage.getItem("token");if(void 0===t)e(f());else{var a=new Date(localStorage.getItem("expirtaionDate"));a<=new Date?e(f()):(e(E(t)),e(b((a.getTime()-(new Date).getTime())/1e3)))}}))}}}))((function(e){return Object(n.useEffect)((function(){e.onTryAutoSignup()})),r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(w,e,r.a.createElement(J,null))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=a(68),Q=a(166),Z=a(119),$=function(e,t){return Object(Z.a)(Object(Z.a)({},e),t)},Y={token:null,error:null,loading:!1},ee=function(e,t){return $(e,{error:null,loading:!0})},te=function(e,t){return $(e,{token:t.token,error:null,loading:!1})},ae=function(e,t){return $(e,{error:t.error,loading:!1})},ne=function(e,t){return $(e,{token:null})},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return ee(e);case"AUTH_SUCCESS":return te(e,t);case"AUTH_FAIL":return ae(e,t);case"AUTH_LOGOUT":return ne(e);default:return e}},oe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||W.c,le=Object(W.d)(re,oe(Object(W.a)(Q.a))),ce=r.a.createElement(i.a,{store:le},r.a.createElement(K,null));l.a.render(r.a.createElement(r.a.StrictMode,null,ce),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[171,1,2]]]);
//# sourceMappingURL=main.e81340bb.chunk.js.map